!function(){"use strict";angular.module("app",["ionic","ngCordova","ngResource","ui.bootstrap.tpls","ui.bootstrap.datepicker"]).run(["$ionicPlatform","$rootScope","$stateParams","$state","AuthService",function(e,t,o,n,a){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()}),a.login("admin","admin1234"),n.go("main.home")}]).config(["$stateProvider","$httpProvider",function(e,t){t.interceptors.push("AuthInterceptor"),e.state("login",{url:"/login",templateUrl:"state/login/login.html",controller:"LoginController as Login"}).state("main",{url:"/main",templateUrl:"state/main/main.html",controller:"MainController as Main"}).state("main.home",{url:"/home",views:{main:{templateUrl:"state/mainHome/mainHome.html",controller:"MainHomeController as Home"}}}).state("main.list",{url:"/list",views:{main:{templateUrl:"state/list/list.html",controller:"ListController as List"}}}).state("main.daumMap",{url:"/daumMap/:from",views:{main:{templateUrl:"state/daumMap/daumMap.html",controller:"DaumMapController as Map"}}}).state("main.detail",{url:"/detail/:id",views:{main:{templateUrl:"state/detail/detail.html",controller:"DetailController as Detail"}}}).state("main.schedule",{url:"/schdule/:id/:selectedDate",views:{main:{templateUrl:"state/schedule/schedule.html",controller:"ScheduleController as Schedule"}}}).state("main.balance",{url:"/balance","abstract":!0,views:{main:{templateUrl:"state/balance/balance.html",controller:"BalanceController as Balance"}}}).state("main.balance.list",{url:"/list",views:{balance:{templateUrl:"state/balance/list/balanceList.html",controller:"BalanceListController as BalanceList"}}}).state("main.balance.detail",{url:"/detail",views:{balance:{templateUrl:"state/balance/detail/balanceDetail.html",controller:"BalanceDetailController as BalanceDetail"}}}).state("main.cancel",{url:"/cancel",views:{main:{templateUrl:"state/cancel/cancel.html",controller:"CancelController as Cancel"}}}).state("main.favorite",{url:"/favorite",views:{main:{templateUrl:"state/favorite/favorite.html",controller:"FavoriteController as Favorite"}}}).state("main.show",{url:"/show","abstract":!0,views:{main:{templateUrl:"state/show/show.html",controller:"ShowController as Show"}}}).state("main.show.list",{url:"/list",views:{show:{templateUrl:"state/show/list/showList.html",controller:"ShowListController as ShowList"}}}).state("main.show.savedList",{url:"/savedList",views:{show:{templateUrl:"state/show/savedShow/savedShowList.html",controller:"SavedShowListController as SavedShowList"}}}).state("main.show.detail",{url:"/detail/:id",views:{show:{templateUrl:"state/show/detail/showDetail.html",controller:"ShowDetailController as ShowDetail"}}}).state("main.announcements",{"abstract":!0,url:"/announcements",views:{main:{templateUrl:"state/announcements/announcements.html",controller:"AnnouncementsController as Announcements"}}}).state("main.announcements.eventList",{url:"/eventList",views:{announcements:{templateUrl:"state/announcements/event/eventList.html",controller:"EventListController as EventList"}}}).state("main.announcements.eventDetail",{url:"/eventDetail/:id",views:{announcements:{templateUrl:"state/announcements/event/eventDetail.html",controller:"EventDetailController as EventDetail"}}}).state("main.announcements.noticeList",{url:"/noticeList",views:{announcements:{templateUrl:"state/announcements/notice/noticeList.html",controller:"NoticeListController as NoticeList"}}}).state("main.announcements.noticeDetail",{url:"/noticeDetail/:id",views:{announcements:{templateUrl:"state/announcements/notice/noticeDetail.html",controller:"NoticeDetailController as NoticeDetail"}}})}])}(),function(){"use strict";angular.module("app").constant("governorUrl","http://192.168.0.65:1337").constant("appName","todayNail")}(),function(){"use strict";function e(e,t,o){var n=t+"/booking/:list/:image/:mine/:dateBetween",a={list:"@list",image:"@image",mine:"@mine",dateBetween:"@dateBetween"},r={getBookings:{method:"GET",params:{list:"list"}},getMyBookings:{method:"GET",params:{list:"list",mine:"mine"}},getBookingsDateBetween:{method:"GET",params:{dateBetween:"dateBetween"}},findById:{method:"GET"},createBooking:{method:"POST"},updateBooking:{method:"PUT"},removeBooking:{method:"DELETE"}},i=e(n,a,r);return i.createBookingWithImage=function(e,n){angular.extend(n,e);var a=n.file;delete n.file;var r={params:n,chunkedMode:!1};return{$promise:o.upload(t+"/booking/image",a,r)}},i.updateBookingWithImage=function(e,n){angular.extend(n,e);var a=n.file;delete n.file;var r={params:n,chunkedMode:!1,httpMethod:"PUT"};return{$promise:o.upload(t+"/booking/image",a,r)}},i}angular.module("app").factory("Bookings",e),e.$inject=["$resource","governorUrl","$cordovaFileTransfer"]}(),function(){"use strict";function e(e,t){var o=t+"/post/comment",n={},a={addCommentToPost:{method:"POST"}},r=e(o,n,a);return r}angular.module("app").factory("Comments",e),e.$inject=["$resource","governorUrl"]}(),function(){"use strict";function e(e,t,o){var n=t+"/place/:list/:mine/:within/:image",a={list:"@list",mine:"@mine",within:"@within",image:"@image"},r={getPlaces:{method:"GET",params:{list:"list"}},getMyPlaces:{method:"GET",params:{list:"list",mine:"mine"}},getPlacesWithin:{method:"GET",params:{list:"list",within:"within"}},findById:{method:"GET"},createPlace:{method:"POST"},createPlaceWithImage:{method:"POST",params:{image:"image"}},updatePlace:{method:"PUT"},updatePlaceWithImage:{method:"PUT",params:{image:"image"}},removePlace:{method:"DELETE"}},i=e(n,a,r);return i.createPlaceWithImage=function(e,n){angular.extend(n,e);var a=n.file;delete n.file;var r={params:n,chunkedMode:!1};return{$promise:o.upload(t+"/place/image",a,r)}},i.updatePlaceWithImage=function(e,n){angular.extend(n,e);var a=n.file;delete n.file;var r={params:n,chunkedMode:!1,httpMethod:"PUT"};return{$promise:o.upload(t+"/place/image",a,r)}},i}angular.module("app").factory("Places",e),e.$inject=["$resource","governorUrl","$cordovaFileTransfer"]}(),function(){"use strict";function e(e,t,o){var n=t+"/post/:list/:image/:mine/:like",a={list:"@list",image:"@image",mine:"@mine",like:"@like"},r={getPosts:{method:"GET",params:{list:"list"}},getMyPosts:{method:"GET",params:{list:"list",mine:"mine"}},findById:{method:"GET"},createPost:{method:"POST"},updatePost:{method:"PUT"},likePost:{method:"PUT",params:{like:"like"}},removePost:{method:"DELETE"}},i=e(n,a,r);return i.createPostWithImage=function(e,n){angular.extend(n,e);var a=n.file?n.file:"[]";delete n.file;var r={params:n,chunkedMode:!1};return{$promise:o.upload(t+"/post",a,r)}},i.updatePostWithImage=function(e,n){angular.extend(n,e);var a=n.file;delete n.file;var r={params:n,chunkedMode:!1,httpMethod:"PUT"};return{$promise:o.upload(t+"/post/image",a,r)}},i}angular.module("app").factory("Posts",e),e.$inject=["$resource","governorUrl","$cordovaFileTransfer"]}(),function(){"use strict";function e(e,t,o){var n=t+"/product/:list/:image/:mine/:checkProductCode",a={list:"@list",image:"@image",mine:"@mine",checkProductCode:"@checkProductCode"},r={getProducts:{method:"GET",params:{list:"list"}},getMyProducts:{method:"GET",params:{list:"list",mine:"mine"}},checkProductCode:{method:"GET",params:{checkProductCode:"checkProductCode"}},findById:{method:"GET"},createProduct:{method:"POST"},updateProduct:{method:"PUT"},removeProduct:{method:"DELETE"}},i=e(n,a,r);return i.createProductWithImage=function(e,n){angular.extend(n,e);var a=n.file;delete n.file;var r={params:n,chunkedMode:!1};return{$promise:o.upload(t+"/product/image",a,r)}},i.updateProductWithImage=function(e,n){angular.extend(n,e);var a=n.file;delete n.file;var r={params:n,chunkedMode:!1,httpMethod:"PUT"};return{$promise:o.upload(t+"/product/image",a,r)}},i}angular.module("app").factory("Products",e),e.$inject=["$resource","governorUrl","$cordovaFileTransfer"]}(),function(){"use strict";function e(e,t,o){var n=t+"/user",a={},r={},i=e(n,a,r);return i}angular.module("app").factory("Users",e),e.$inject=["$resource","governorUrl","$cordovaFileTransfer"]}(),function(){"use strict";function e(e,t,o,n,a){return{request:function(e){var t=n.get(a+"_auth_token");return t&&(t=angular.fromJson(n.get(a+"_auth_token")).token),t&&(e.headers.Authorization="Bearer "+t),e},responseError:function(t){if(401===t.status||403===t.status||405===t.status||498===t.status)"/login"!==o.path()?(n.unset(a+"_auth_token"),o.path("/login"),(null==t.data||void 0==t.data)&&(t.data={message:"권한이 없는 페이지이거나 로그인하지 않았습니다. 로그인해주세요."})):t.data.hideMessage=!0;else if(300===t.status){var r=null,i="";switch(t.data.redirectCode){case"ACTIVATE":r="/resend/false";break;case"RESET":r="/passReset"}o.path()!==r?(o.path(r),(null==t.data||void 0==t.data)&&(t.data={message:i})):t.data.hideMessage=!0}return e.reject(t)}}}function t(e,t,o,n,a,r,i){function l(e){s=e}var s=null,c={name:"어플리켓"};this.getUser=function(){return s},this.getApp=function(){return c},this.getToken=function(){var e=r.get(i+"_auth_token");return e?e=angular.fromJson(r.get(i+"_auth_token")).token:void n.go("login")},this.init=function(){var e=JSON.parse(r.get(i+"_auth_token"));null!=e&&null!=e.user&&l(e.user)},this.register=function(o){var n=t.defer();return e({url:a+"/user/register",method:"post",headers:{"Content-Type":"application/json"},params:o}).success(function(e,t,o,a){n.resolve(e)}).error(function(e,t,o,a){n.reject(e)}),n.promise},this.registerWithImage=function(e,t,o,n){var r=new FileUploadOptions,i=angular.copy(e);r.params=i,r.headers={Connection:"close"},r.chunkedMode=!1;var l=new FileTransfer;l.upload(t,encodeURI(a+"/user/registerWithImage"),o,n,r,!0)},this.login=function(o,n){var s=t.defer();return e({url:a+"/auth/local",method:"post",headers:{"Content-Type":"application/json"},data:{identifier:o,password:n}}).success(function(e,t,o,n){console.log(e),r.set(i+"_auth_token",JSON.stringify(e)),l(e.user),s.resolve(e)}).error(function(e,t,o,n){console.log(e),s.reject(e)}),s.promise},this.verifyResetCode=function(o,n){var l=t.defer();return e({url:a+"/user/passwordresetcomplete",method:"put",headers:{"Content-Type":"application/json"},data:{email:o,code:n}}).success(function(e,t,o,n){r.set(i+"_auth_token",JSON.stringify(e)),l.resolve(e)}).error(function(e,t,o,n){l.reject(e)}),l.promise},this.passReset=function(o){var n=t.defer();return e({url:a+"/user/resetStart",method:"post",headers:{"Content-Type":"application/json"},data:{email:o}}).success(function(e,t,o,a){n.resolve(e)}).error(function(e,t,o,a){n.reject(e)}),n.promise},this.logout=function(){r.unset(i+"_auth_token"),l(null),o.path("/login")},this.changePassword=function(o,n){var r=t.defer();return e({url:a+"/user/changePassword",method:"post",headers:{"Content-Type":"application/json"},data:{oldPassword:o,newPassword:n}}).success(function(e,t,o,n){r.resolve(e)}).error(function(e,t,o,n){r.reject(e)}),r.promise},this.checkNickname=function(o){var n=t.defer();return e({url:a+"/user/checknickname",method:"get",headers:{"Content-Type":"application/json"},params:{nickname:o}}).success(function(e,t,o,a){n.resolve(e)}).error(function(e,t,o,a){n.reject(e)}),n.promise},this.checkEmail=function(o){var n=t.defer();return e({url:a+"/user/checkEmail",method:"get",headers:{"Content-Type":"application/json"},params:{email:o}}).success(function(e,t,o,a){n.resolve(e)}).error(function(e,t,o,a){n.reject(e)}),n.promise},this.getMyProfile=function(){var o=t.defer();return e({url:a+"/user/profile",method:"get",headers:{"Content-Type":"application/json"}}).success(function(e,t,n,a){o.resolve(e)}).error(function(e,t,n,a){o.reject(e)}),o.promise},this.updateMyProfile=function(o){var n=t.defer();return e({url:a+"/user/update",method:"put",headers:{"Content-Type":"application/json"},data:{nickname:o}}).success(function(e,t,o,a){n.resolve(e)}).error(function(e,t,o,a){n.reject(e)}),n.promise},this.updateMyProfileWithImage=function(e,t,o,n){var r=new FileUploadOptions,i=angular.copy(e);r.params=i,r.httpMethod="PUT",r.headers={Connection:"close",Authorization:"Bearer "+this.getToken()},r.chunkedMode=!1;var l=new FileTransfer;l.upload(t,encodeURI(a+"/user/updateWithImage"),o,n,r,!0)}}angular.module("app").factory("AuthInterceptor",e),e.$inject=["$q","$injector","$location","LocalService","appName"],angular.module("app").service("AuthService",t),t.$inject=["$http","$q","$location","$state","governorUrl","LocalService","appName"]}(),function(){"use strict";function e(e,t){function o(o){e(function(){var e=t.document.getElementById(o);e&&e.focus()})}var n={focusById:o};return n}angular.module("app").factory("Dom",e),e.$inject=["$timeout","$window"]}(),function(){"use strict";function e(e,t,o){function n(t){var o=localStorage.getItem(t),n=angular.fromJson(o);Array.isArray(n)||(n=[]);for(var a=0;a<n.length;a++){var r=n[a];if(r.id===e.id)return!0}}function a(o,n,a,l){var s=localStorage.getItem(o),c=angular.fromJson(s);Array.isArray(c)||(c=[]);for(var u=0;u<c.length;u++){var d=c[u];if(d.id===e.id)return c.splice(u,1),s=angular.toJson(c),localStorage.setItem(o,s),n.styleFavorite=!1,t.popUp.alert["default"]("즐겨찾기 알림","즐겨찾기에서 삭제되었습니다."),!1}var m={id:a.current.id};r(a,m),console.log(m),c.push(m),s=angular.toJson(c),localStorage.setItem(o,s),l&&i(l,m.id),n.styleFavorite=!0,t.popUp.alert["default"]("즐겨찾기 알림","즐겨찾기에 추가되었습니다.")}function r(e,t){if(e.current.name&&(t.name=e.current.name),e.current.title&&(t.title=e.current.title),e.current.photos.length>0&&(t.photos=[{url:e.current.photos[0].url}]),e.current.location&&(t.location={coordinates:e.current.location.coordinates}),e.current.address&&(t.address=e.current.address),e.current.createdBy&&(t.createdBy={},t.createdBy.username=e.current.createdBy.username),e.current.likes&&(t.likes=e.current.likes),e.current.comments){t.comments=[];for(var o=0;o<e.current.comments.length;o++)t.comments.push(1)}}function i(e,t){var n=localStorage.getItem(e),a=angular.fromJson(n);Array.isArray(a)||(a=[]);for(var r=0;r<a.length;r++){var i=a[r];if(i===t)return!1}a.push(t),n=angular.toJson(a),localStorage.setItem(e,n),o.likePost({id:t}).$promise.then(function(e){console.log(e)},function(e){console.log(e)})}var l={isFavorite:n,saveToFavorite:a};return l}angular.module("app").factory("Favorite",e),e.$inject=["$stateParams","Message","Posts"]}(),function(){"use strict";angular.module("app").factory("LocalService",function(){return{get:function(e){return localStorage.getItem(e)},set:function(e,t){return localStorage.setItem(e,t)},unset:function(e){return localStorage.removeItem(e)},getSession:function(e){return sessionStorage.getItem(e)},setSession:function(e,t){return sessionStorage.setItem(e,t)},unsetSession:function(e){return sessionStorage.removeItem(e)}}})}(),function(){"use strict";function e(e,t){function o(t){e.show(t)}function n(t){e.show({template:'<h4 class="message-success">'+t+"</h4>",duration:2e3})}function a(t){e.show({template:'<h4 class="message-error">'+t+"</h4>",duration:2e3})}function r(){e.hide()}function i(e,o){return t.alert({title:e||"인터넷이 끊겼습니다.",template:o||"인터넷을 켜주세요."})}var l={loading:{"default":o,hide:r},message:{success:n,error:a},popUp:{alert:{"default":i}}};return l}angular.module("app").factory("Message",e),e.$inject=["$ionicLoading","$ionicPopup"]}(),function(){"use strict";function e(e,t,o){function n(n,a){return o.horizontalIonScrollCount||(o.horizontalIonScrollCount=0),o.horizontalIonScrollCount++,a.delegateHandle="horizontal"+o.horizontalIonScrollCount,function(o,n,a){t(function(){var t=a.delegateHandle,o=e.$getByHandle(t).getScrollView(),n=o.__container,r=o.touchStart,i=o.mouseDown,l=o.touchMove,s=o.mouseMove;n.removeEventListener("touchstart",o.touchStart),n.removeEventListener("mousedown",o.mouseDown),document.removeEventListener("touchmove",o.touchMove),document.removeEventListener("mousemove",o.mousemove),o.touchStart=function(e){e.preventDefault=function(){},r.apply(o,[e])},o.touchMove=function(e){e.preventDefault=function(){},l.apply(o,[e])},o.mouseDown=function(e){e.preventDefault=function(){},i&&i.apply(o,[e])},o.mouseMove=function(e){e.preventDefault=function(){},s&&s.apply(o,[e])},n.addEventListener("touchstart",o.touchStart,!1),n.addEventListener("mousedown",o.mouseDown,!1),document.addEventListener("touchmove",o.touchMove,!1),document.addEventListener("mousemove",o.mouseMove,!1)})}}return{scope:!0,restrict:"A",compile:n}}angular.module("app").directive("parentScroll",e),e.$inject=["$ionicScrollDelegate","$timeout","$window"]}(),function(){"use strict";function e(e){function t(t,o,n){o.on("click",function(t){o.addClass("touch"),e(function(){o.removeClass("touch")},50)})}return{restrict:"A",link:t}}angular.module("app").directive("touch",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(e,t){function o(o,n,a){e.vw=n.prop("offsetWidth"),t.addEventListener("resize",function(){e.$apply(function(){e.vw=n.prop("offsetWidth")})})}return{link:o}}angular.module("app").directive("vw",e),e.$inject=["$rootScope","$window"]}(),function(){"use strict";function e(){function e(e,t){var o=[];if(e)for(var n=0;n<e.length;n++)for(var a=e[n],r=0;r<a.tags.length;r++){var i=a.tags[r];i===t&&o.push(a)}return o}return e}angular.module("app").filter("filterByTag",e)}(),function(){"use strict";function e(e,t,o,n,a){var r=this;r.Model=e,n.$on("$ionicView.beforeEnter",function(){a.loading["default"](),t.findById({id:o.id}).$promise.then(function(t){console.log(JSON.stringify(t,null,2)),e.post=t,a.loading.hide()},function(e){a.popUp.alert["default"]("해당포스트가 없습니다","지워진 포스트이거나 인터넷이 꺼져있습니다.")})})}angular.module("app").controller("NoticeDetailController",e),e.$inject=["NoticeDetailModel","Posts","$stateParams","$scope","Message"]}(),function(){"use strict";function e(){var e={post:{id:"",comments:[],photos:[{url:""}],content:"",title:"",category:"SHOW-POST",createdBy:{nickname:""}}};return e}angular.module("app").factory("NoticeDetailModel",e)}(),function(){"use strict";function e(e,t,o,n,a){var r=this;r.Model=e,n.$on("$ionicView.beforeEnter",function(){e.postsWrapper.posts.length<10&&(a.loading["default"](),t.getPosts({category:"NOTICE-POST",sort:"id DESC",limit:10}).$promise.then(function(t){e.postsWrapper=t,a.loading.hide()},function(e){a.popUp.alert["default"]()}))}),r.goToDetailHandler=function(e){o.go("main.announcements.noticeDetail",{id:e.id})},r.getNewerPosts=function(){var o=e.postsWrapper.posts;t.getPosts({category:"NOTICE-POST",limit:10,newerThan:o[0].id}).$promise.then(function(e){e.posts.length||a.popUp.alert["default"]("공지사항 알림","새로운 공지사항이 없습니다."),e.posts.forEach(function(e,t,n){o.unshift(e)}),n.$broadcast("scroll.refreshComplete")},function(e){a.popUp.alert["default"](),n.$broadcast("scroll.refreshComplete")})},r.getOlderPosts=function(){var o=e.postsWrapper.posts;t.getPosts({category:"NOTICE-POST",sort:"id DESC",limit:10,olderThan:o[o.length-1].id}).$promise.then(function(t){t.posts.forEach(function(e,t,n){o.push(e)}),n.$broadcast("scroll.infiniteScrollComplete"),e.postsWrapper.more=t.more},function(e){a.popUp.alert["default"](),n.$broadcast("scroll.infiniteScrollComplete")})},r.checkForMore=function(){return e.postsWrapper.more}}angular.module("app").controller("NoticeListController",e),e.$inject=["NoticeListModel","Posts","$state","$scope","Message"]}(),function(){"use strict";function e(){var e={postsWrapper:{posts:[{title:"",content:"",category:"",comments:[],photos:[{url:""}]}],more:!0}};return e}angular.module("app").factory("NoticeListModel",e)}(),function(){"use strict";function e(e,t,o,n,a){function r(){o.loading["default"](),t.get({id:n.id}).$promise.then(function(t){console.log(JSON.stringify(t,null,2)),e.post=t,o.loading.hide()},function(e){o.popUp.alert["default"]("이벤트 알림","종료된 이벤트입니다.")})}var i=this;i.Model=e,a.$on("$ionicView.beforeEnter",function(){r()})}angular.module("app").controller("EventDetailController",e),e.$inject=["EventDetailModel","Posts","Message","$stateParams","$scope"]}(),function(){"use strict";function e(){var e={post:{id:"",comments:[],photos:[{url:""}],content:"",title:"",category:"SHOW-POST",createdBy:{nickname:""}}};return e}angular.module("app").factory("EventDetailModel",e)}(),function(){"use strict";function e(e,t,o,n,a){var r=this;r.Model=e,n.$on("$ionicView.beforeEnter",function(){e.postsWrapper.posts.length<10&&(a.loading["default"](),t.getPosts({category:"EVENT-POST",sort:"id DESC",limit:10}).$promise.then(function(t){e.postsWrapper=t,console.log(t),a.loading.hide()},function(e){a.popUp.alert["default"]()}))}),r.goToDetailHandler=function(e){o.go("main.announcements.eventDetail",{id:e.id})},r.getNewerPosts=function(){var o=e.postsWrapper.posts;t.getPosts({category:"EVENT-POST",limit:10,newerThan:o[0].id}).$promise.then(function(e){e.posts.length||a.popUp.alert["default"]("이벤트 알림","새로운 이벤트가 없습니다."),e.posts.forEach(function(e,t,n){o.unshift(e)}),n.$broadcast("scroll.refreshComplete")},function(e){a.popUp.alert["default"](),n.$broadcast("scroll.refreshComplete")})},r.getOlderPosts=function(){var o=e.postsWrapper.posts;t.getPosts({category:"EVENT-POST",sort:"id DESC",limit:10,olderThan:o[o.length-1].id}).$promise.then(function(t){t.posts.forEach(function(e,t,n){o.push(e)}),n.$broadcast("scroll.infiniteScrollComplete"),e.postsWrapper.more=t.more},function(e){a.popUp.alert["default"](),n.$broadcast("scroll.infiniteScrollComplete")})},r.checkForMore=function(){return e.postsWrapper.more}}angular.module("app").controller("EventListController",e),e.$inject=["EventListModel","Posts","$state","$scope","Message"]}(),function(){"use strict";function e(){var e={postsWrapper:{posts:[{title:"",content:"",category:"",comments:[],photos:[{url:""}]}],more:!0}};return e}angular.module("app").factory("EventListModel",e)}(),function(){"use strict";function e(e){var t=this;t.places=e.places}angular.module("app").controller("BalanceListController",e),e.$inject=["BalanceListModel"]}(),function(){"use strict";function e(){var e={places:[{id:"222aaa",longitude:12.121212,latitude:155.13131,title:"우리 네일",titlePhoto:"http://placehold.it/500x500",address:"address 2"},{id:"asdfa1111",longitude:12.121212,latitude:155.13131,title:"우리 네일2",titlePhoto:"http://placehold.it/500x500",address:"address 2"}]};return e}angular.module("app").factory("BalanceListModel",e)}(),function(){"use strict";function e(e){var t=this;t.Model=e}angular.module("app").controller("BalanceDetailController",e),e.$inject=["BalanceDetailModel"]}(),function(){"use strict";function e(){var e={};return e}angular.module("app").factory("BalanceDetailModel",e)}(),function(){"use strict";function e(e,t,o,n,a,r,i){function l(){return r.loading["default"](),t.findById({id:n.id,populates:"comments",eager:!0}).$promise.then(function(t){console.log(t.post),e.current=t.post,r.loading.hide()},function(e){r.popUp.alert["default"]("해당포스트가 없습니다","지워진 포스트이거나 인터넷이 꺼져있습니다.")})}function s(t){commentBody={content:t,post:n.id},o.addCommentToPost({},commentBody).$promise.then(function(t){r.popUp.alert["default"]("댓글달기 알림","댓글을 성공적으로 작성하셨습니다."),e.currentPost.comments.unshift(t),console.log(t)},function(e){r.popUp.alert["default"]("댓글달기 알림","인터넷이 꺼져있습니다.")})}var c=this;c.Model=e,c.toggleSavePost=i.saveToFavorite.bind(null,"NAIL_SAVED_POSTS",c,e,"NAIL_LIKED_ONCE"),c.addComment=s,a.$on("$ionicView.beforeEnter",function(){l(),c.styleFavorite=i.isFavorite("NAIL_SAVED_POSTS")})}angular.module("app").controller("ShowDetailController",e),e.$inject=["ShowDetailModel","Posts","Comments","$stateParams","$scope","Message","Favorite"]}(),function(){"use strict";function e(){var e={current:{id:"",comments:[],photos:[{url:""}],content:"",title:"",category:"SHOW-POST",createdBy:{nickname:""}}};return e}angular.module("app").factory("ShowDetailModel",e)}(),function(){"use strict";function e(e,t,o,n,a){var r=this;r.Model=e,n.$on("$ionicView.beforeEnter",function(){e.postsWrapper.posts.length<10&&(a.loading["default"](),t.getPosts({category:"SHOW-POST",sort:"id DESC",limit:10}).$promise.then(function(t){e.postsWrapper=t,a.loading.hide()},function(e){a.popUp.alert["default"]()}))}),r.goToDetailHandler=function(e){o.go("main.show.detail",{id:e.id})},r.getNewerPosts=function(){var o=e.postsWrapper.posts;t.getPosts({category:"SHOW-POST",limit:10,newerThan:o[0].id}).$promise.then(function(e){e.posts.length||a.popUp.alert["default"]("새로운포스트가 없습니다","나중에 다시 확인해주세요"),e.posts.forEach(function(e,t,n){o.unshift(e)}),n.$broadcast("scroll.refreshComplete")},function(e){a.popUp.alert["default"](),n.$broadcast("scroll.refreshComplete")})},r.getOlderPosts=function(){var o=e.postsWrapper.posts;t.getPosts({category:"SHOW-POST",sort:"id DESC",limit:10,olderThan:o[o.length-1].id}).$promise.then(function(t){t.posts.forEach(function(e,t,n){o.push(e)}),n.$broadcast("scroll.infiniteScrollComplete"),e.postsWrapper.more=t.more},function(e){a.popUp.alert["default"](),n.$broadcast("scroll.infiniteScrollComplete")})},r.checkForMore=function(){return e.postsWrapper.more}}angular.module("app").controller("ShowListController",e),e.$inject=["ShowListModel","Posts","$state","$scope","Message"]}(),function(){"use strict";function e(){var e={postsWrapper:{posts:[{title:"",content:"",category:"",comments:[],photos:[{url:""}]}],more:!0}};return e}angular.module("app").factory("ShowListModel",e)}(),function(){"use strict";function e(e,t,o){var n=this;n.Model=e,o.$on("$ionicView.beforeEnter",function(){e.posts=angular.fromJson(localStorage.getItem("NAIL_SAVED_POSTS"))}),n.goToDetailHandler=function(e){t.go("main.show.detail",{id:e.id})}}angular.module("app").controller("SavedShowListController",e),e.$inject=["SavedShowListModel","$state","$scope"]}(),function(){"use strict";function e(){var e={};return e}angular.module("app").factory("SavedShowListModel",e),e.$inject=[]}(),function(){"use strict";function e(e){var t=this;t.goToEventListHandler=function(){e.go("main.announcements.eventList")},t.goToNoticeListHandler=function(){e.go("main.announcements.noticeList")}}angular.module("app").controller("AnnouncementsController",e),e.$inject=["$state"]}(),function(){"use strict";function e(){var e={};return e}angular.module("app").factory("AnnouncementsModel",e)}(),function(){"use strict";function e(e){var t=this;t.Model=e}angular.module("app").controller("BalanceController",e),e.$inject=["BalanceModel"]}(),function(){"use strict";function e(){var e={};return e}angular.module("app").factory("BalanceModel",e),e.$inject=[]}(),function(){"use strict";function e(e,t,o,n){function a(){return t.getMyBookings({from:moment().clone().subtract(2,"hours").toDate().getTime(),to:moment().clone().add(1,"years").toDate().getTime()}).$promise.then(function(t){e.current.bookings=t.bookings},function(e){o.popUp.alert["default"]("인터넷이 꺼져있습니다","인터넷을 연결해주세요."),console.log(e)})}function r(n,a,r){return t.updateBooking({id:a},{status:n}).$promise.then(function(t){o.popUp.alert["default"]("예약취소 알림","예약이 취소 되었습니다."),Array.prototype.splice.call(e.current.bookings,r,1)},function(e){})}function i(e){return"CANCELLED"!==e.status}var l=this;l.Model=e,l.cancelHandler=r.bind(null,"CACNCELLED"),l.isNotCancelled=i,n.$on("$ionicView.beforeEnter",function(){a()})}angular.module("app").controller("CancelController",e),e.$inject=["CancelModel","Bookings","Message","$scope"]}(),function(){"use strict";function e(){var e={current:{bookings:[{datetime:new Date,products:[{product:{name:"우늘 네일"},amount:1}],place:{name:"place1"},status:"CANCELLED"},{datetime:new Date,products:[{product:{name:"오늘 네일 2"},amount:1}],place:{name:"place2"},status:"PROCESSING"}]}};return e}angular.module("app").factory("CancelModel",e)}(),function(){"use strict";function e(e,t,o,n,a,r,i,l,s){function c(){n.loading["default"](),a.findById({id:t.id,populates:"photos,products,bookings"}).$promise.then(function(t){e.current=t,d.interiorPhotos=u(e.current.photos,"INTERIOR"),d.portFolioPhotos=u(e.current.photos,"PORTFOLIO"),n.loading.hide(),r.update()},function(e){n.popUp.alert["default"]("네일샵정보 알림","요청하신 네일샵은 더이상 존재하지 않습니다.")})}var u=s("filterByTag"),d=this;d.Model=e,d.date=moment(),d.isFavorite=l.isFavorite.bind(null,"NAIL_SAVED_PLACES"),d.interiorPhotos=[],d.portFolioPhotos=[],d.toggleSavePlace=l.saveToFavorite.bind(null,"NAIL_SAVED_PLACES",d,e),o.$on("$ionicView.beforeEnter",function(){c()})}angular.module("app").controller("DetailController",e),e.$inject=["DetailModel","$stateParams","$scope","Message","Places","$ionicSlideBoxDelegate","$state","Favorite","$filter"]}(),function(){"use strict";function e(e,t,o){var n={current:{openingHours:[{start:"00:00",end:"00:00"},{start:"07:00",end:"20:00"},{start:"07:00",end:"20:00"},{start:"07:00",end:"20:00"},{start:"07:00",end:"20:00"},{start:"09:00",end:"22:00"},{start:"09:00",end:"22:00"}]},selectedDate:{current:"BOOL",customClass:"STRING",date:"DATE",disabled:"BOOL"},dayClickHandler:function(e){var n=o.id;console.log(n);var a=moment(e.date);t.go("main.schedule",{id:n,selectedDate:a.format("YYYY-MM-DD")})}};return n}angular.module("app").factory("DetailModel",e),e.$inject=["$q","$state","$stateParams"]}(),function(){"use strict";function e(e,t,o,n,a,r){function i(e,t){"homeInput"===e.from&&t.focusById("daum-map-search-input")}var l=this;l.Model=e,l.findMeThenSearchNearBy=function(){return e.findMeThenSearchNearBy()},l.searchLocationNearBy=function(t){return e.searchLocationNearBy(t)},l.goToDetailHandler=function(){e.modal.hide(),n.go("main.detail",{id:e.selectedPlace.id})},l.goToHandler=function(e,t){n.go(e,t)},l.selectedPlace=e.selectedPlace,o.$on("$ionicView.enter",function(){t.fromTemplateUrl("state/daumMap/placeModal.html",{scope:o,animation:"slide-in-up"}).then(function(t){e.modal=t}),e.domMap.relayout()}),o.$on("$ionicView.enter",function(){i(a,r)})}angular.module("app").controller("DaumMapController",e),e.$inject=["DaumMapModel","$ionicModal","$scope","$state","$stateParams","Dom"]}(),function(){"use strict";function e(e,t,o,n,a,r,i,l){return{scope:{markerSrc:"@",markerClickedSrc:"@",markerWidth:"@",markerHeight:"@"},compile:function(n,s){function c(e,t){var n=u(),a=_.pluck(e,"id"),r=_.map(a,function(e,t,a){return o.getBookingsDateBetween({placeId:e,from:n.clone().set({hour:0,minute:0,second:0}).toDate().getTime(),to:n.clone().set({hour:23,minute:59,second:59}).toDate().getTime()}).$promise});return i.all(r).then(function(o){var a=d(e,o,p,n,t);if(0===a.length)return[];for(var r=e.length-1;r>=0;r--)"unavailable"===a[r]&&e.splice(r,1);return e},function(e){console.log(e)})}function u(){var e=(moment().get("hour"),moment().get("minute"));if(30>=e)var t=moment().set({minutes:29});else var t=moment().set({minutes:59});return t}function d(e,t,o,n,a){var i=n.clone().get("day"),l=[];angular.forEach(e,function(o,a){console.log(o);var r=o.openingHours[i].end.split(":"),s=r[0],c=r[1],u=moment().set({hour:s,minutes:c});o.openingHours[i].start===o.openingHours[i].end?(e.splice(a,1,null),t.splice(a,1,null)):n.isAfter(u)?(e.splice(a,1,null),t.splice(a,1,null)):l.push(u)});for(var s=e.length-1;s>=0;s--)null===e[s]&&(e.splice(s,1),t.splice(s,1));if(0===e.length)return r.popUp.alert["default"]("바로검색 알림","지금은 검색주위의 샵들이 모두 닫았습니다, 내일 이용해주시거나, 다른지역을 검색해주세요"),[];var c=_.map(t,function(e){return e.bookings});console.log("arrayOfBookings"),console.log(c);for(var u=(_.map(e,function(e){return e.employee}),_.map(c,function(e){return _.map(e,function(e){return e.products[0].product.duration})})),d=[],s=0;s<u.length;s++){var m=[],p=c[s],f=u[s],g=e[s];console.log("place"),console.log(g);for(var h=0;h<f.length;h++){var v=p[s],$=v.datetime,S=moment($),w=f[s],M=l[s];S.isBetween(n.clone(),n.clone().add(a,"minutes"))&&S.isBefore(M.clone())&&m.push(S);for(var y=Math.ceil(w/o),P=0;y>P;P++){var T=o*(P+1),C=S.clone().add(T,"minutes");C.isBetween(n.clone(),n.clone().add(a,"minutes"))&&C.isBefore(M.clone())&&m.push(C)}}d.push(m)}console.log("arrayOfBookingsMoment"),console.log(d);for(var k=[],s=0;s<d.length;s++){var D=d[s];console.log(D);var E=_.map(D,function(e){var t=e.get("hours"),o=e.get("minutes"),n=String(t)+":"+String(o);return n});0===E.length&&(E=["available"]),k.push(E)}console.log("arrayOfTimeStrings"),console.log(k);var L=[];angular.forEach(k,function(e){
var t=_.groupBy(e,function(e){return e});L.push(t)}),console.log("arrayOfGroupedTimeStrings"),console.log(L);for(var b=[],s=0;s<L.length;s++){var I=!1,g=e[s];for(var B in L[s])if(L[s][B].length<g.employee||"available"===B){b.push("available"),I=!0;break}I===!1&&b.push("unavailable")}return console.log("availabilities"),console.log(b),b}function m(o,n,a){angular.forEach(e.places,function(i,l,s){var c=i.location.coordinates[0],u=i.location.coordinates[1],d=new daum.maps.LatLng(u,c),m=new daum.maps.Marker({map:h,position:d,title:String(l),image:o,clickable:!0});daum.maps.event.addListener(m,"click",function(){var i=this;a.$apply(function(){angular.forEach(e.markers,function(e,t,n){e.setImage(o)}),i.setImage(n);var a=Number(i.getTitle());r.loading["default"](),t.findById({id:e.places[a].id,populates:"photos"}).$promise.then(function(t){r.loading.hide(),e.selectedPlace=t,console.log(e.selectedPlace),e.modal.show()},function(e){r.loading.hide(),r.popUp.alert["default"]()})})}),e.markers.push(m)})}var p=30,f=n[0],g={center:new daum.maps.LatLng(37.5,127),level:4,draggable:!0};daum.maps.disableHD();var h=new daum.maps.Map(f,g),v=new daum.maps.services.Places,$=function(o,n,a,i){angular.forEach(e.markers,function(e,t,o){e.setMap(null)}),e.markers=[],t.getPlacesWithin({latitude:o.latitude,longitude:o.longitude,distance:o.distance||5e3,limit:o.limit||50}).$promise.then(function(t){"quick"===l.from?c(t.places,60).then(function(t){e.places=t,m(n,a,i)},function(e){console.log(e)}):(e.places=t.places,m(n,a,i)),r.loading.hide()},function(e){console.log(e)})};return e.findMeThenSearchNearBy=function(){r.loading["default"](),a.getCurrentPosition({maximumAge:3e3,timeout:5e3}).then(function(t){if(null==t.coords)return r.loading.hide(),r.popUp.alert["default"]("위치 공유가 꺼져있습니다.","위치 공유가 켜주세요."),!1;{var o={latitude:t.coords.latitude,longitude:t.coords.longitude};e.currentPosition=o}h.setCenter(new daum.maps.LatLng(e.currentPosition.latitude,e.currentPosition.longitude)),r.loading.hide()},function(e){console.log(e),r.loading.hide(),r.popUp.alert["default"]("위치 공유가 꺼져있습니다.","위치 공유가 켜주세요.")})},e.searchLocationNearBy=function(e){return r.loading["default"](),e?void v.keywordSearch(e,function(e,t,o){if(void 0===t.places[0])return r.loading.hide(),r.popUp.alert["default"]("요청하신 장소가 없습니다","다시검색해주세요"),!1;console.log(e),h.panTo(new daum.maps.LatLng(t.places[0].latitude,t.places[0].longitude));({latitude:t.places[0].latitude,longitude:t.places[0].longitude});r.loading.hide()},function(e){console.log(e),console.log(e),r.loading.hide(),r.popUp.alert["default"]({title:"위치 공유가 꺼져있습니다.",template:"위치 공유가 켜주세요."})}):(r.loading.hide(),r.popUp.alert["default"]("검색하기 알림","장소 값을 넣어서 다시 검색해주세요"),!1)},function(t,o,n){var a=new daum.maps.Size(t.markerWidth,t.markerHeight),i=new daum.maps.MarkerImage(t.markerSrc,a),l=new daum.maps.MarkerImage(t.markerClickedSrc,a);h.relayout(),e.domMap=h,daum.maps.event.addListener(h,"idle",function(){r.loading["default"]();var e={longitude:h.getCenter().getLng(),latitude:h.getCenter().getLat()};angular.extend(e,{distance:2e3,limit:20}),console.log(e),$(e,i,l,t)})}}}}angular.module("app").directive("daumMap",e),e.$inject=["DaumMapModel","Places","Bookings","$state","$cordovaGeolocation","Message","$q","$stateParams"]}(),function(){"use strict";angular.module("app").factory("DaumMapModel",["$http","$q","governorUrl",function(e,t,o){var n={category:"NAIL-PLACE",currentPosition:{latitude:"FLOAT",longitude:"FLOAT"},markers:[],places:[],selectedPlace:{},modal:{},findMeThenSearchNearBy:function(){},searchLocationNearBy:function(){}};return n}])}(),function(){"use strict";function e(e,t,o,n){var a=this;a.lists=e.lists,a.itemHandler=function(o){angular.copy(o,e.currentItem),t.go("main.detail",{id:o.id}),console.log(o)},a.doRefresh=function(){},a.getData=function(){console.log("testing")},a.checkForMore=function(){return e.moreData}}angular.module("app").controller("ListController",e),e.$inject=["ListModel","$state","$scope","$timeout"]}(),function(){"use strict";function e(){var e={lists:[{id:0,title:"This is list 0",content:"This is the content"},{id:1,title:"This is list 1",content:"This is the content of list 1"},{id:2,title:"This is list 2",content:"This is the content of list 2"}],currentItem:{},moreData:!1};return e}angular.module("app").factory("ListModel",e)}(),function(){"use strict";function e(e,t,o){var n=this;n.Model=e,t.$on("$ionicView.loaded",function(){n.goToDetailHandler=function(e){o.go("main.detail",{id:e.id})}}),t.$on("$ionicView.beforeEnter",function(){e.placeList=angular.fromJson(localStorage.getItem("NAIL_SAVED_PLACES"))})}angular.module("app").controller("FavoriteController",e),e.$inject=["FavoriteModel","$scope","$state"]}(),function(){"use strict";function e(){var e={};return e}angular.module("app").factory("FavoriteModel",e)}(),function(){"use strict";function e(e){var t=this;t.Model=e}angular.module("app").controller("LoginController",e),e.$inject=["LoginModel"]}(),function(){"use strict";function e(){var e={};return e}angular.module("app").factory("LoginModel",e)}(),function(){"use strict";function e(e,t,o,n,a,r){var i=this;i.Model=t,i.toggleSideMenu=function(){e.toggleLeft()},i.menuSelectHandler=function(n){t.currentItem=n,o.go(n.state),e.toggleLeft(!1)},i.getCurrentState=function(){return r.currentStateName()},i.toggleAccordion=function(){i.settingSubMenu=!i.settingSubMenu},i.toggleSettingHandler=function(e){t.setting[e]="on"===t.setting[e]?"off":"on"},i.goToDaumMapHandler=function(){o.go("main.daumMap")}}angular.module("app").controller("MainController",e),e.$inject=["$ionicSideMenuDelegate","MainModel","$state","$timeout","$ionicNavBarDelegate","$ionicHistory"]}(),function(){"use strict";function e(){var e={sideMenuLists:[{state:"main.home",text:"홈으로 가기"},{state:"main.show.savedList",text:"마이갤러리"},{state:"main.balance.list",text:"적립금 확인"},{state:"main.cancel",text:"예약 취소"},{state:"main.announcements.eventList",text:"이벤트 / 공지사항"}],currentItem:{state:"main.home",text:"홈으로 가기"},setting:{location:"on",push:"on"}};return e}angular.module("app").factory("MainModel",e)}(),function(){"use strict";function e(e,t){var o=this;o.search="",o.goToHandler=function(e,o){t.go(e,o)},o.searchHandler=function(e){t.go("main.daumMap",{from:"homeInput"})}}angular.module("app").controller("MainHomeController",e),e.$inject=["MainHomeModel","$state"]}(),function(){"use strict";function e(){var e={};return e}angular.module("app").factory("MainHomeModel",e)}(),function(){"use strict";function e(e,t,o,n,a,r,i,l,s){function c(e,t,o,n){var a=moment(e).set({hour:0,minute:0,second:0}),r=a.day(),i=t[r],l=i.start.split(":"),s=i.end.split(":"),c=l[0],u=l[1],d=s[0],m=s[1],p=60*Number(c)+Number(u),f=n?60*Number(d)+Number(m)+o:60*Number(d)+Number(m),g=_.range(p,f,o),h=[];return angular.forEach(g,function(e,t,o){var n=a.clone(),r=n.set({minute:e,second:0});h.push(r)}),h}function u(o){{var n=t.viewSlots,a=t.bookings=o.bookings;e.current.employee}angular.forEach(a,function(e,t,o){for(var a=moment.utc(e.datetime).local().add(1,"seconds"),r=e.products[0].product&&e.products[0].product.duration,i=0;i<n.length;i++){if(i<n.length-1)var l=n[i+1];else if(i===n.length-1)var l=n[i].clone().add(p,"minutes");if(a.isBetween(n[i],l)){for(var s=Math.ceil(Number(r)/Number(p)),c=0;s>c;c++)n[i+c].bookingCount?n[i+c].bookingCount+=1:n[i+c].bookingCount=1;break}}})}function d(e){a.popUp.alert["default"](e+"이 비었습니다.",e+"을 입력/골라 주세요.")}var m=this;m.Model=t,t.current=e.current;var p=30;m.selectSlotHandler=function(o,n){return t.selectedSlot=o,t.selectedIndex=n,o.bookingCount>=e.current.employee?(a.popUp.alert["default"]("예약불가 알림","예약이 꽉 차있는 시간입니다."),!1):(m.modal.show(),void(t.form.datetime=o.toDate()))},m.isSelectedSlot=function(e){var o=t.selectedSlot.get&&t.selectedSlot.get("hour"),n=t.selectedSlot.get&&t.selectedSlot.get("minute"),a=o+":"+n,r=e.get&&e.get("hour"),i=e.get&&e.get("minute"),l=r+":"+i;return a===l},m.isAvailableSlot=function(t){return null!=t.bookingCount&&null!=e.current.employee?Number(e.current.employee)>t.bookingCount:!0},m.selectProductHandler=function(e){t.form.products=[{product:e}]},m.isSelectedProduct=function(e){return(t.form.products&&t.form.products[0]&&t.form.products[0].product.id)===e.id},m.closeModalHandler=function(){n.getBookingsDateBetween({placeId:s.id,from:moment(s.selectedDate).clone().toDate().getTime(),to:moment(s.selectedDate).clone().add(1,"days").toDate().getTime()}).$promise.then(function(o){t.viewSlots=c(s.selectedDate,e.current.openingHours,30,!0),u(o),angular.copy({},t.form),m.modal.hide()})},m.bookingHandler=function(){return t.form.place=s.id,null==t.form.products[0]?d("서비스란"):null==t.form.userKoreanName?d("이름란"):null==t.form.userPhoneNumber?d("연락처란"):(a.loading["default"](),void n.getBookingsDateBetween({placeId:s.id,from:moment(s.selectedDate).clone().toDate().getTime(),to:moment(s.selectedDate).clone().add(1,"days").toDate().getTime()}).$promise.then(function(o){t.viewSlots=c(s.selectedDate,e.current.openingHours,30,!0),u(o);for(var r=t.selectedIndex,i=t.form.products[0].product.duration,l=Math.ceil(i/p),d=r;r+l>d;d++){var f=t.viewSlots[d].bookingCount?t.viewSlots[d].bookingCount:0;if(f>=Number(e.current.employee))return a.loading.hide(),a.popUp.alert["default"]("예약 불가 안내","고르신 서비스의 시간이 다음 예약시간과 겹치게 되어 예약이 불가합니다."),!1;if(r+l>t.viewSlots.length)return a.loading.hide(),a.popUp.alert["default"]("예약 불가 안내","고르신 서비스의 시간이 영업 종료시간을 넘기어 예약이 불가합니다."),!1}n.createBooking({},m.Model.form).$promise.then(function(e){a.loading.hide(),a.popUp.alert["default"]("예약 완료 알림","예약이 완료 되었습니다.").then(function(e){m.closeModalHandler()}),console.log(e)},function(e){console.log(e)})},function(e){console.log(e)}))},r.$on("$ionicView.beforeEnter",function(){var o=e.current.openingHours;t.viewSlots=c(s.selectedDate,o,30,!0),n.getBookingsDateBetween({placeId:s.id,from:moment(s.selectedDate).clone().toDate().getTime(),to:moment(s.selectedDate).clone().add(1,"days").toDate().getTime()}).$promise.then(function(e){console.log(e),u(e)},function(e){console.log(e)})}),r.$on("$ionicView.afterEnter",function(){i.fromTemplateUrl("state/schedule/reserveModal.html",{scope:r,animation:"slide-in-up"}).then(function(e){m.modal=e})})}angular.module("app").controller("ScheduleController",e),e=["DetailModel","ScheduleModel","Places","Bookings","Message","$scope","$ionicModal","$q","$stateParams"]}(),function(){"use strict";function e(){var e={current:{openingHours:[{start:"00:00",end:"00:00"},{start:"07:00",end:"20:00"},{start:"07:00",end:"20:00"},{start:"07:00",end:"20:00"},{start:"07:00",end:"20:00"},{start:"09:00",end:"22:00"},{start:"09:00",end:"22:00"}]},selectedSlot:{},viewSlots:["moment","moment","moment"],bookings:[{datetime:"datetime",products:[{duration:"30"}]}],form:{products:[""],userKoreanName:null,userPhoneNumber:null,datetime:new Date,place:"placeId"}};return e}angular.module("app").factory("ScheduleModel",e)}(),function(){"use strict";function e(e,t,o,n,a,r,i,l,s,c,u){var d=this;n.fromTemplateUrl("state/show/showModal.html",{scope:a,animation:"slide-in-up"}).then(function(e){d.modal=e}),d.modalHideHandler=function(){d.writeImageSrc=null,d.writeTitle=null,d.writeContent=null,d.modal.hide()},d.modalShowHandler=function(){d.modal.show()},d.goToSavedPostListHandler=function(){o.go("main.show.savedList")},d.showWriteImage=function(){return null!=d.writeImageSrc},d.getPictureHandler=function(e){void 0===e&&(e=1),console.log(e);var t={allowEdit:!0,quality:50,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG,correctOrientation:!0,targetWidth:500,mediaType:Camera.MediaType.PICTURE,cameraDirection:Camera.Direction.BACK,sourceType:e};i.getPicture(t).then(function(e){d.writeImageFile=e;var t=e.substr(e.lastIndexOf("/")+1),o=e.substr(0,e.lastIndexOf("/")+1);u.readAsDataURL(o,t).then(function(e){console.log(e),d.writeImageSrc=e},function(e){console.log(e)})},function(e){console.log(e)})},d.postHandler=function(){l.loading["default"]();var e={category:"SHOW-POST",title:d.writeTitle,content:d.writeContent,file:d.writeImageFile};t.createPostWithImage({},e).$promise.then(function(){d.writeTitle="",d.writeContent="",d.writeImageSrc=null,d.writeImageFile="",l.loading.hide(),l.message.success("포스트가 만들어졌습니다."),d.modal.hide(),s(function(){o.go("main.show.list",{},{reload:!0})},1500)},function(e){console.log(e),l.loading.hide(),l.message.error("다시 시도해주세요.")},function(e){console.dir(e)})}}angular.module("app").controller("ShowController",e),e.$inject=["ShowModel","Posts","$state","$ionicModal","$scope","ShowListModel","$cordovaCamera","Message","$timeout","$window","$cordovaFile"]}(),function(){"use strict";function e(){var e={};return e}angular.module("app").factory("ShowModel",e)}();